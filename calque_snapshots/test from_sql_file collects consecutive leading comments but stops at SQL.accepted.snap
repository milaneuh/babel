---
version: 1.3.1
title: test from_sql_file collects consecutive leading comments but stops at SQL
---
GIVEN a %SqlFile{} with multiple leading comments:

  %Babel.FileHandling.SqlFile{
  path: "lib/queries/multi_comment.sql",
  name: "multi_comment",
  content: "-- first\n-- second\nSELECT * FROM x;\n-- ignored trailing comment\n"
}

WHEN calling:

  {:ok, untyped_query} = Babel.Query.from_sql_file(file)

THEN the resulting UntypedQuery is:

  %Babel.Query.UntypedQuery{
  file: "lib/queries/multi_comment.sql",
  starting_line: 1,
  name: %Babel.ValueIdentifier{name: "multi_comment"},
  comment: ["first", "second"],
  content: "-- first\n-- second\nSELECT * FROM x;\n-- ignored trailing comment\n",
  parent_folder: "lib"
}
